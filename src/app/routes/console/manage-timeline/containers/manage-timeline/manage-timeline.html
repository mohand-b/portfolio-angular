<div class="flex items-center justify-between">
  <h1 class="text-2xl font-semibold">{{ "Parcours" | uppercase }}</h1>

  <button (click)="openPanel()" class="secondary" matButton="filled">
    <mat-icon>arrow_back</mat-icon>
    Ajouter un nouvel élément
  </button>
</div>

<app-side-panel (closed)="onCloseRequested()" [isOpen]="panelOpen()">
  <div class="h-full flex flex-col">
    <div class="shrink-0">
      <mat-form-field appearance="outline" class="w-full">
        <mat-select [formControl]="typeControl" class="unified-field" placeholder="Catégorie">
          @for (t of types; track t) {
            <mat-option [value]="t" class="flex items-center gap-2">
              <mat-icon
                fontIcon="{{ typeMeta[t].icon }}"
                [style.color]="typeMeta[t].color"
                class="mr-2 align-middle"
              ></mat-icon>
              {{ typeMeta[t].label }}
            </mat-option>
          }
        </mat-select>
      </mat-form-field>
      <div class="mb-4"></div>
    </div>

    <div class="flex-1">
      @switch (selectedType()) {
        @case (TimelineItemType.Job) {
          <app-job-create (submitted)="onCreated()"/>
        }
        @case (TimelineItemType.Certification) {
          <app-certification-create (created)="onCloseRequested()"/>
        }
        @case (TimelineItemType.Project) {
          <app-project-timeline-item-create (submitted)="onCreated()"/>
        }
        @case (TimelineItemType.Other) {
          <app-other-timeline-item-create (submitted)="onCreated()"/>
        }
        @default {
          <div class="text-slate-500 text-sm">
            Choisis une catégorie pour afficher le formulaire correspondant.
          </div>
        }
      }
    </div>
  </div>
</app-side-panel>

